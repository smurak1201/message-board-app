# 本番環境移行時の修正ガイド

このアプリを本番環境にデプロイする際に必要な修正・確認ポイントをまとめています。

---

## 1. API エンドポイントの変更と.env の使い方

- ルート直下の `.env` ファイルの `VITE_API_URL` を本番用 API の URL に書き換えてください。
  - 例: `VITE_API_URL=https://your-production-api.example.com/backend_mysql/posts.php`
- フロントエンドの API 通信は `import.meta.env.VITE_API_URL` でこの値を参照しています。
- `App.tsx` などで API エンドポイントを直接記述せず、必ず環境変数を使うようにしてください。

## 2. バックエンド（PHP+MySQL）の設定

- 本番サーバーに `backend_mysql/` ディレクトリ（`posts.php` など）を配置してください。
- PHP ファイルの DB 接続情報（ホスト名・ユーザー・パスワード・DB 名）は本番用に修正してください。
  - 例: `backend_mysql/db.php` などで設定
- MySQL に本番用のデータベース・テーブル（`posts`）を作成してください。

## 3. フロントエンドのビルドとデプロイ

- `npm run build` で静的ファイル（`dist/`）を生成します。
- 生成された `dist/` フォルダを本番 Web サーバー（例: Apache/Nginx の公開ディレクトリ）にアップロードしてください。
- `index.html` から API へのパスが正しいか確認してください。

## 4. セキュリティ・その他の注意点

- `.env` や `backend_mysql/db.php` など、機密情報は Git 管理対象外にしてください。
- CORS 設定や HTTPS 対応など、本番サーバーのセキュリティ設定も確認してください。
- 不要な開発用ファイル（例: `frontend/`, `backend/`, `*.md` など）は本番サーバーにアップロードしないでください。

---

## 参考: 本番移行時のチェックリスト

- [ ] `.env` の API エンドポイントを本番用に変更した
- [ ] フロントエンドの API 参照を `import.meta.env.VITE_API_URL` に統一した
- [ ] PHP バックエンドの DB 接続情報を本番用に変更した
- [ ] MySQL に本番用 DB・テーブルを作成した
- [ ] `npm run build` で `dist/` を生成し、本番サーバーに配置した
- [ ] 不要な開発用ファイルを除外した
- [ ] セキュリティ・CORS・HTTPS 等の本番設定を確認した

---

何か問題が発生した場合は、エラーメッセージやサーバーログを確認し、設定を見直してください。
